webpackJsonp([1],{"7zck":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("/5sW"),s=n("NYxO"),a={name:"App",methods:{initTestbed:function(){console.log("initTestbed"),this.$store.dispatch("initTestbed")},startTrial:function(){console.log("startTrial"),this.$store.dispatch("startTrial")}},computed:Object(s.b)(["alerts","testbedAvailable"])},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-toolbar",{staticClass:"primary"},[n("img",{staticClass:"project-logo",attrs:{src:"https://avatars2.githubusercontent.com/u/16935616?s=200&v=4"}}),t._v(" "),n("v-toolbar-title",{staticClass:"title"},[t._v("Admin tool")]),t._v(" "),n("v-spacer"),t._v(" "),t._l(t.alerts,function(e){return n("v-alert",{key:e.id,attrs:{type:e.type,dismissible:""},model:{value:e.isVisible,callback:function(n){t.$set(e,"isVisible",n)},expression:"alert.isVisible"}},[n("v-badge",{attrs:{left:""}},[t._v("1")]),t._v("\n      "+t._s(e.text)+"\n    ")],1)}),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{on:{click:t.initTestbed}},[t._v("Initialize testbed")]),t._v(" "),n("v-btn",{attrs:{disabled:!t.testbedAvailable},on:{click:t.startTrial}},[t._v("Start trial")])],2),t._v(" "),n("main",[n("router-view")],1)],1)},staticRenderFns:[]};var r=n("VU/8")(a,o,!1,function(t){n("kvu/")},null,null).exports,c=n("/ocq"),l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list-wrapper"},[n("v-container",{staticClass:"pl-5 pt-5",attrs:{"grid-list-lg":""}},[n("v-layout",{attrs:{column:""}},[n("v-flex",{attrs:{md4:""}},[n("v-card",[n("v-card-title",[n("div",[t._v("Tool 1")]),t._v(" "),n("div",[t._v("dsfdfg")]),t._v(" "),n("div",[t._v("dsfdfg")]),n("div",[t._v("dsfdfg")]),n("div",[t._v("dsfdfg")])]),t._v(" "),n("v-card-actions")],1)],1),t._v(" "),n("v-flex",{attrs:{md4:""}},[n("v-card",[n("v-card-title",[t._v("\n                Tool 2\n              ")]),t._v(" "),n("v-card-actions")],1)],1)],1)],1)],1)},staticRenderFns:[]};var u=n("VU/8")({name:"Tools"},l,!1,function(t){n("RNPa")},"data-v-3f6d67ee",null).exports,d={computed:Object(s.b)(["solutions","topics","gateways"]),name:"Overview"},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"mt-0",attrs:{fluid:"","grid-list-xl":""}},[n("v-layout",{staticClass:"scroll-y",staticStyle:{height:"400px"},attrs:{row:"",wrap:"","justify-space-around":""}},[n("v-flex",{attrs:{xs4:""}},[n("h3",{staticClass:"text-xs-center primary--text"},[t._v("Tools")]),t._v(" "),n("list-component",{attrs:{data:t.solutions}})],1),t._v(" "),n("v-flex",{attrs:{xs4:""}},[n("h3",{staticClass:"text-xs-center primary--text"},[t._v("Topics")]),t._v(" "),n("list-component",{attrs:{data:t.topics}})],1),t._v(" "),n("v-flex",{attrs:{xs4:""}},[n("h3",{staticClass:"text-xs-center primary--text"},[t._v("Gateways")]),t._v(" "),n("list-component",{attrs:{data:t.gateways}})],1)],1),t._v(" "),n("v-layout",{staticClass:"scroll-y",staticStyle:{"max-height":"300px","min-height":"300px"},attrs:{column:""}},[n("v-flex",[n("v-card",{},[n("logs-table")],1)],1)],1)],1)},staticRenderFns:[]},f=n("VU/8")(d,v,!1,null,null,null).exports,m={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticClass:"mt-3 mr-3 mb-3 ml-3"},[n("v-flex",{attrs:{row:"",wrap:"",xs2:""}},[n("v-card",{staticStyle:{height:"100%"}},[n("v-list",[n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",[t._v(" Gateway 1")])],1),t._v(" "),n("v-list-tile-action",[n("v-icon",{attrs:{color:"grey"}},[t._v("chevron_right")])],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",[t._v(" Gateway 2")])],1),t._v(" "),n("v-list-tile-action",[n("v-icon",{attrs:{color:"grey"}},[t._v("chevron_right")])],1)],1)],1)],1)],1),t._v(" "),n("v-flex",{attrs:{row:"",wrap:"",xs10:""}},[n("v-card",{staticStyle:{height:"100%"}})],1)],1)},staticRenderFns:[]};var p=n("VU/8")({name:"ConfigureGateways"},m,!1,function(t){n("ig8C")},"data-v-5ae3cb15",null).exports;i.a.use(c.a);var h=new c.a({routes:[{path:"/overview",name:"Overview",component:f},{path:"/tools",name:"Tools",component:u},{path:"/configureGateways",name:"ConfigureGateways",component:p}]}),_=n("3EgV"),g=n.n(_),T=n("rNNc");function b(t){this.id=t.id,this.sendDate=t.sendDate,this.level=t.level,this.clientId=t.clientId,this.message=t.message}function E(t,e,n,i){this.id=t,this.type=e,this.text=n,this.isVisible=i||!1}i.a.use(s.a);var y=new s.a.Store({state:{socket:{isConnected:!1,message:"",reconnectError:!1,pingTimer:null,pingTimeOutTimer:null,messageAccepted:!1},solutions:[],topics:[],gateways:[],logEntries:[],alerts:[],testbedAvailable:!1},getters:{solutions:function(t){return t.solutions},topics:function(t){return t.topics},gateways:function(t){return t.gateways},logEntries:function(t){return t.logEntries},alerts:function(t){return t.alerts},testbedAvailable:function(t){return t.testbedAvailable}},mutations:{SOCKET_ONOPEN:function(t){var e;console.log("connection open"),t.socket.isConnected=!0,(e=y.state.socket).messageAccepted=!1,e.pingTimer=setInterval(function(){y.$socket.send('{"mutation":"HBREQUEST","requestId": "'+T.a.uniqueId()+'","sendTime":"'+(new Date).toUTCString()+'"}')},5e3),e.pingTimerOutTimer=setInterval(function(){y.state.socket.messageAccepted?e.messageAccepted=!1:i.a.prototype.$socket.close()},1e4)},SOCKET_ONCLOSE:function(t){console.log("connection closed"),t.socket.isConnected=!1,clearInterval(t.socket.pingTimer),clearInterval(t.socket.pingTimeOutTimer)},SOCKET_ONERROR:function(t){},SOCKET_RECONNECT:function(){console.log("reconnect")},HBRESPONSE:function(t){t.socket.messageAccepted=!0},LOG_NOTIFICATION:function(t,e){e.date=new Date(e.date).toUTCString(),t.logEntries.push(new b(e))},UPDATE_SOLUTION:function(t,e){t.solutions.find(function(t){return t.id===e.id}).state=e.state},UPDATE_TOPIC:function(t,e){t.topics.find(function(t){return t.id===e.id}).state=e.state},UPDATE_GATEWAY:function(t,e){t.gateways.find(function(t){return t.id===e.id}).state=e.state},GET_SOLUTIONS:function(t,e){e.solutions.forEach(function(e){return t.solutions.push(new function(t){this.id=t.id,this.name=t.name,this.state=t.state||!1,this.description=t.description}(e))})},GET_TOPICS:function(t,e){e.topics.forEach(function(e){return t.topics.push(new function(t){this.id=t.id,this.type=t.type,this.name=t.name,this.state=t.state||!1,this.description=t.description,this.publishSolutionIDs=t.publishSolutionIDs}(e))})},GET_GATEWAYS:function(t,e){e.gateways.forEach(function(e){return t.gateways.push(new function(t){this.id=t.id,this.name=t.name,this.state=t.state||!1,this.description=t.description,this.managingType=t.managingType}(e))})},GET_LOGS:function(t,e){e.logs.forEach(function(e){return t.logEntries.push(new b(e))})},ADD_ALERT:function(t,e){t.alerts.push(e)},TESTBED_AVAILABLE:function(t,e){t.testbedAvailable=e}},actions:{getSolutions:function(t){this.axios.get("getAllTrialSolutions").then(function(e){t.commit("GET_SOLUTIONS",e.data)}).catch(function(){var e=new E(T.a.uniqueId(),"error","Solutions could not be loaded. Check that backend is available.",!0);t.commit("ADD_ALERT",e)})},getTopics:function(t){this.axios.get("getAllTrialTopics").then(function(e){t.commit("GET_TOPICS",e.data)}).catch(function(){var e=new E(T.a.uniqueId(),"error","Topics could not be loaded. Check if the backend is available.",!0);t.commit("ADD_ALERT",e)})},getGateways:function(t){this.axios.get("getAllTrialGateways").then(function(e){t.commit("GET_GATEWAYS",e.data)}).catch(function(){var e=new E(T.a.uniqueId(),"error","Gateways could not be loaded. Check if the backend is available.",!0);t.commit("ADD_ALERT",e)})},getAllLogs:function(t){this.axios.get("getAllLogs").then(function(e){t.commit("GET_LOGS",e.data),console.log(e.data)}).catch(function(){var e=new E(T.a.uniqueId(),"error","Logs could not be loaded. Check if the backend is available.",!0);t.commit("ADD_ALERT",e)})},startTrial:function(t){this.axios.post("startTrialConfig").then(function(){var e=new E(T.a.uniqueId(),"success","Trial was successfully started.",!0);t.commit("ADD_ALERT",e)}).catch(function(){var e=new E(T.a.uniqueId(),"error","Trial could not be started.",!0);t.commit("ADD_ALERT",e)})},initTestbed:function(t){this.axios.post("initTestbed").then(function(){var e=new E(T.a.uniqueId(),"succes","Testbed was successfully initialized.",!0);t.commit("ADD_ALERT",e),t.commit("TESTBED_AVAILABLE",!0)}).catch(function(){var e=new E(T.a.uniqueId(),"error","Testbed could not be initialized.",!0);t.commit("ADD_ALERT",e)})}}}),A=(n("7zck"),n("U8jO")),w=n.n(A),x=n("mtWM"),C=n.n(x),S=n("Rf8U"),O=n.n(S),D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",[n("v-layout",{attrs:{column:""}},t._l(t.data,function(e){return n("v-card",{key:e.id,staticClass:"mb-3 tertiary"},[n("v-card-title",[n("p",[t._v(t._s(e.name))]),t._v(" "),n("v-spacer"),t._v(" "),e.hasOwnProperty("state")?n("v-icon",{class:{unavailable:!e.state,available:e.state}},[t._v("lens")]):t._e()],1),t._v(" "),n("v-card-text",[t._v("\n        "+t._s(e.description)+"\n      ")])],1)}))],1)},staticRenderFns:[]},I=n("VU/8")({name:"ListComponent",props:["data"]},D,!1,null,null,null).exports,k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-data-table",{attrs:{items:t.logEntries,headers:t.headers},scopedSlots:t._u([{key:"items",fn:function(e){return[n("tr",{class:{logError:"ERROR"===e.item.level||"SEVER"===e.item.level,logWarning:"WARNING"===e.item.level}},[n("td",[t._v(t._s(e.item.id))]),t._v(" "),n("td",[t._v(t._s(e.item.sendDate))]),t._v(" "),n("td",[t._v(t._s(e.item.level))]),t._v(" "),n("td",[t._v(t._s(e.item.clientId))]),t._v(" "),n("td",[t._v(t._s(e.item.message))])])]}}])})},staticRenderFns:[]},R=n("VU/8")({name:"LogsTable",data:function(){return{headers:[{text:"LogID",align:"left",sortable:!1,value:"id"},{text:"Date/Time",align:"left",sortable:!1,value:"date"},{text:"Level",align:"left",sortable:!1,value:"level"},{text:"ClientID",align:"left",sortable:!1,value:"clientID"},{text:"Message",align:"left",sortable:!1,value:"message"}]}},computed:{logEntries:function(){var t=this.$store.getters.logEntries;return t.sort(function(t,e){return t.date<e.date})}}},k,!1,null,null,null).exports;i.a.use(T.b),i.a.use(O.a,C.a.create({baseURL:"http://localhost:8090/AdminService"})),y.axios=i.a.prototype.axios,i.a.use(w.a,"ws://localhost:8090/AdminServiceWSEndpoint",{store:y,format:"json",reconnection:!0,reconnectionDelay:2e3}),y.$socket=i.a.prototype.$socket,i.a.use(g.a,{theme:{primary:"#FDB836",secondary:"#b0bec5",tertiary:"#fff8dc7a",accent:"#8c9eff",error:"#b71c1c"}}),i.a.component("list-component",I),i.a.component("logs-table",R),i.a.config.productionTip=!1,new i.a({el:"#app",router:h,store:y,render:function(t){return t(r)},created:function(){this.$store.dispatch("getSolutions"),this.$store.dispatch("getTopics"),this.$store.dispatch("getGateways"),this.$store.dispatch("getAllLogs")}})},RNPa:function(t,e){},ig8C:function(t,e){},"kvu/":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.1be44474206fb3a9568a.js.map